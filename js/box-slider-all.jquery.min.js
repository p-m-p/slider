(function(m,h,s){var g={},t=!0,p={},w={speed:800,timeout:5E3,autoScroll:!1,pauseOnHover:!1,effect:"scrollVert3d",perspective:1E3};m.jqBoxSlider=g;g.init=function(a){var d=h.extend({},w,a),c=g.slideAnimator(d.effect);return this.each(function(){var a=h(this),f=a.children(),b=h.extend({},d);a.data("bssettings",b);b.slideAnimator=c;b.slideAnimator.initialize(a,f,b);f=h();null!=b.next&&(f=f.add(h(b.next).on("click",{reverse:!1},u)));null!=b.prev&&(f=f.add(h(b.prev).on("click",{reverse:!0},u)));null!=
b.pause&&(f=f.add(h(b.pause).on("click",x)));f.data("bsbox",a);if(b.autoScroll&&(b.autointv=setInterval(function(){i(a)},b.timeout+b.speed),b.pauseOnHover))a.on("hover",o)})};g.playPause=function(){return this.each(function(){o.call(h(this))})};g.showSlide=function(a){a=parseInt(a,10);return this.each(function(){var d=h(this);q(d);i(d,a)})};g.next=function(){return this.each(function(){var a=h(this);i(a)})};g.prev=function(){return this.each(function(){var a=h(this);i(a,null,!0)})};g.registerAnimator=
function(a,d){h.each(a.split(","),function(a,e){p[e]=d});d._cacheOriginalCSS=y;"function"===typeof d.configure&&d.configure(t,v)};g.slideAnimator=function(a){if("object"===typeof p[a])return p[a];throw Error("The slide animator for the "+a+" effect has not been registered");};g.option=function(a,d){return"undefined"===typeof d?(this.data("bssettings")||{})[a]:this.each(function(){var c=h(this),e=c.data("bssettings")||{};e[a]=d;q(c,e);"effect"===a?(e.slideAnimator.destroy(c,e),e.slideAnimator=g.slideAnimator(d),
e._slideFilter=null,e.bsfaceindex=0,e.slideAnimator.initialize(c,c.children(),e)):"function"===typeof e.slideAnimator.reset&&e.slideAnimator.reset(c,e)})};g.destroy=function(){return this.each(function(){var a=h(this),d=(a.data()||{}).bssettings;d&&"object"===typeof d.slideAnimator&&(d.autointv&&clearInterval(d.autointv),d.slideAnimator.destroy(a,d))})};var u=function(a){var d=h(this).data("bsbox");q(d);i(d,s,a.data.reverse);a.preventDefault()},x=function(a){var d=h(this),c=d.data("bsbox");o.call(c);
d.toggleClass("paused");a.preventDefault()},o=function(a,d,c){var e=h(this);c||(c=e.data("bssettings"));a=null!=c.autointv;"function"===typeof c.onplaypause&&c.onplaypause.call(e,a?"pause":"play");if(a||d)if(c.autointv=clearInterval(c.autointv),!d)return;c.autointv=setInterval(function(){i(e)},c.timeout+c.speed)},i=function(a,d,c){var e=a.data("bssettings"),f=a.children(),b,l,j,g;null!=e._slideFilter&&(f="function"===typeof e._slideFilter?f.filter(function(b){return e._slideFilter.call(f,b,e)}):f.filter(e.slideFilter));
b=e.bsfaceindex||0;var k=f.length;null==d&&(d=c?0>b-1?k-1:b-1:b+1<k?b+1:0);l=d===b||d>=k||0>d?-1:d;a.hasClass("jbs-in-motion")||-1===l||(j=f.eq(b),g=f.eq(l),a.addClass("jbs-in-motion"),"function"===typeof e.onbefore&&e.onbefore.call(a,j,g,b,l),h.extend(e,e.slideAnimator.transition(h.extend({$box:a,$slides:f,$currSlide:j,$nextSlide:g,reverse:c,currIndex:b,nextIndex:l},e))),setTimeout(function(){a.removeClass("jbs-in-motion");"function"===typeof e.onafter&&e.onafter.call(a,j,g,b,l)},e.speed),e.bsfaceindex=
l)},q=function(a,d){d||(d=a.data("bssettings")||{});d.autoScroll&&o.call(a,s,!0,d)},y=function(a,d,c,e){e="position top left display overflow width height".split(" ").concat(e||[]);c.origCSS||(c.origCSS={});c.origCSS[d]||(c.origCSS[d]={});h.each(e,function(f,b){c.origCSS[d][b]=a.css(b)})},v,n=document.body.style,r="";"webkitTransition"in n&&(r="-webkit-");"MozTransition"in n&&(r="-moz-");t="webkitPerspective"in n||"MozPerspective"in n||"perspective"in n;v=r;h.fn.boxSlider=function(a){return"string"===
typeof a&&"function"===typeof g[a]?g[a].apply(this,Array.prototype.slice.call(arguments,1)):g.init.apply(this,arguments)};m.jqBoxSlider.registerAnimator("scrollVert3d,scrollHorz3d",function(){var a={},d=!1,c="";a.configure=function(f,b){d=f;c=b};a.initialize=function(f,b,e){var j=f.parent(),g=j.innerWidth(),k=j.innerHeight(),i={position:"absolute",top:0,left:0};a._cacheOriginalCSS(f,"box",e,[c+"transform",c+"transition",c+"transform-style"]);a._cacheOriginalCSS(b,"slides",e,[c+"transform"]);a._cacheOriginalCSS(j,
"viewport",e,[c+"perspective"]);b.css(i);f.css(h.extend(i,{width:g,height:k}));-1!=="static inherit".indexOf(j.css("position"))&&j.css("position","relative");d?(e.translateZ="scrollVert3d"===e.effect?k/2:g/2,e.bsangle=0,j.css(c+"perspective",e.perspective),j.css("overflow","visible"),f.css(c+"transform-style","preserve-3d"),f.css(c+"transform","translate3d(0, 0, -"+e.translateZ+"px)"),b.eq(0).css(c+"transform","rotate3d(0, 1, 0, 0deg) translate3d(0, 0, "+e.translateZ+"px)"),setTimeout(function(){a.reset(f,
e)},10)):b.filter(":gt(0)").hide()};a.reset=function(f,b){f.css(c+"transition",c+"transform "+(b.speed/1E3+"s"))};a.transition=function(f){var b=f.bsangle+(f.reverse?90:-90),a="scrollVert3d"===f.effect;if(d)return 0===b&&(b=f.reverse?360:-360),f.$currSlide.css("z-index",1),f.$slides.filter(function(b){return f.currIndex!==b}).css(c+"transform","none").css("display","none"),f.$nextSlide.css(c+"transform",e(b,a)+" translate3d(0, 0,"+f.translateZ+"px)").css({display:"block",zIndex:2}),f.$box.css(c+"transform",
"translate3d(0, 0, -"+f.translateZ+"px) rotate3d("+(a?"1, 0, 0, ":"0, 1, 0, ")+b+"deg)"),360===Math.abs(b)&&(f.$box.css(c+"transform","translate3d(0, 0, -"+f.translateZ+"px)"),b=0),{bsangle:b};f.$slides.filter(function(b){return f.currIndex!==b}).hide();f.$currSlide.fadeOut(f.speed);f.$nextSlide.fadeIn(f.speed)};a.destroy=function(f,b){var d=f.children(),a=f.parent();b.origCSS&&(f.css(b.origCSS.box),d.css(b.origCSS.slides),a.css(b.origCSS.viewport),delete b.bsangle,delete b.translateZ)};var e=function(f,
b){switch(f){case 360:case -360:return"rotate3d(0, 1, 0, 0deg)";case 90:case -270:return"rotate3d("+(b?"1, 0, 0,":"0, 1, 0,")+" -90deg)";case 180:case -180:return"rotate3d("+(b?"1, 0, 0,":"0, 1, 0,")+" 180deg)";case 270:case -90:return"rotate3d("+(b?"1, 0, 0,":"0, 1, 0,")+" 90deg)"}};return a}());m.jqBoxSlider.registerAnimator("scrollVert,scrollHorz",function(){var a={initialize:function(d,c,e){var f=d.width(),b=c.eq(0).height();a._cacheOriginalCSS(d,"box",e);a._cacheOriginalCSS(c,"slides",e);-1!==
"static inherit".indexOf(d.css("position"))&&d.css("position","relative");d.css({height:b,overflow:"hidden"});c.css({position:"absolute",top:0,left:0,width:f,height:b}).filter(":gt(0)").hide()},transition:function(d){var a=d.$box,e=d.reverse,f={},b={};"scrollVert"===d.effect?(b.top=(e?a.height():-a.height())+"px",f.top=-parseInt(b.top,10)+"px",a={top:"0px"}):(b.left=(e?-a.width():a.width())+"px",f.left=-parseInt(b.left,10)+"px",a={left:"0px"});d.$nextSlide.css(h.extend(b,{display:"block"})).animate(a,
d.speed);d.$currSlide.animate(f,d.speed)},destroy:function(a,c){a.children().css(c.origCSS.slides);a.css(c.origCSS.box)}};return a}());m.jqBoxSlider.registerAnimator("blindDown,blindLeft",function(){var a=function(a,b){return this.get(a)!==b.$blinds.get(0)},d=function(a){return a.attr("src")||a.find("img").attr("src")},c=function(a){switch(a.effect){case "blindDown":return{top:"100%"};case "blindLeft":return{width:"0px"}}},e=function(a){var b={backgroundImage:"url("+d(a.$nextSlide)+")"};switch(a.effect){case "blindDown":b.top=
"0px";break;case "blindLeft":b.width=a.blindSize}return b};return{initialize:function(f,b,c){var e=h(document.createElement("div")),g=d(b.eq(0)),k,i=0;c.blindCount||(c.blindCount=10);c.blindSpeed=c.speed;c.blindintv=c.speed/c.blindCount;c.speed+=c.blindintv*c.blindCount;c.blindSize=f.width()/c.blindCount;this._cacheOriginalCSS(f,"box",c);for(this._cacheOriginalCSS(b,"slides",c);i<c.blindCount;++i)k=i*c.blindSize,h(document.createElement("div")).css({position:"absolute",top:"0px",left:k+"px",width:c.blindSize+
"px",height:"100%",backgroundImage:"url("+g+")",backgroundPosition:-k+"px 0px"}).appendTo(e);f.css("position","relative");f.css({height:b.css("height"),overflow:"hidden"});b.css({zIndex:1,position:"absolute",top:0,left:0});e.css({position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",zIndex:2}).appendTo(f);c.$blinds=e;c._slideFilter=a},transition:function(a){a.$box.height();var b=a.$blinds.children();a.$slides.hide();a.$nextSlide.show();b.each(function(b,d){var e=a.blindintv*b,g=h(d);
setTimeout(function(){g.animate(c(a),a.blindSpeed)},e)});setTimeout(function(){b.css(e(a))},a.speed)},destroy:function(a,b){b.$blinds.remove();a.css(b.origCSS.box);a.children().css(b.origCSS.slides);b.speed=b.blindSpeed;delete b.blindCount;delete b.blindSpeed;delete b.blindintv;delete b.$blinds;delete b.blindSize}}}());m.jqBoxSlider.registerAnimator("fade",function(){var a={initialize:function(d,c,e){a._cacheOriginalCSS(d,"box",e);a._cacheOriginalCSS(c,"slides",e);-1!=="static inherit".indexOf(d.css("position"))&&
d.css("position","relative");d.css({height:c.eq(0).height(),overflow:"hidden"});c.css({position:"absolute",top:0,left:0}).filter(":gt(0)").hide()},transition:function(a){a.$nextSlide.fadeIn(a.speed);a.$currSlide.fadeOut(a.speed)},destroy:function(a,c){a.children().css(c.origCSS.slides);a.css(c.origCSS.box)}};return a}())})(window,jQuery||Zepto);
